<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coup de coeur BUT : HelloFresh</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div class="viewer-layout">
        <!-- Main Content -->
        <div class="viewer-main">
            <!-- Header -->
            <header class="viewer-header">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <h1
                        style="font-family: var(--font-header); font-size: 1rem; font-weight: 600; margin: 0; max-width: 500px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--accent-blue);">
                        Coup de coeur BUT : HelloFresh
                    </h1>
                </div>

                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="viewer-toolbar">
                        <button class="btn btn-secondary" onclick="toggleHighlightLinks()"
                            title="Highlight all links (H)">
                            <span id="highlightBtnText">Show Links</span>
                        </button>
                        <button class="btn btn-secondary" onclick="downloadEmailZip()" title="Download Email (D)">
                            Download
                        </button>
                    </div>

                    <span class="crm-badge" data-crm="Unknown">Unknown</span>

                    <div class="device-toggle hide-mobile">
                        <button class="device-btn" onclick="setMode('mobile')" title="Mobile (1)">Mobile</button>
                        <button class="device-btn" onclick="setMode('tablet')" title="Tablet (2)">Tablet</button>
                        <button class="device-btn active" onclick="setMode('desktop')"
                            title="Desktop (3)">Desktop</button>
                    </div>

                    <button class="btn-icon" id="theme-toggle" onclick="toggleTheme()" title="Toggle Theme (T)">
                        <svg class="icon icon-moon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg class="icon icon-sun" style="display:none;" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Email Content -->
            <div class="viewer-content">
                <div id="deviceFrame" data-mode="desktop"
                    style="width: 100%; max-width: 800px; height: 100%; transition: max-width 0.3s ease;">
                    <iframe id="emailFrame" class="email-frame"></iframe>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="viewer-sidebar">
            <div class="sidebar-header">
                <span class="sidebar-title">Metadata</span>
            </div>

            <div class="sidebar-content">
                <!-- General Info -->
                <div class="meta-section">
                    <div class="meta-section-title">General</div>
                    <div class="meta-row">
                        <span class="meta-key">Sender</span>
                        <span class="meta-val">benoit@getinside.fr</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Subject</span>
                        <span class="meta-val"
                            style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            title="Coup de coeur BUT : HelloFresh">Coup de coeur BUT : HelloFresh</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Preheader</span>
                        <span class="meta-val"
                            style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            title="Coup de ❤️ BUT : HelloFresh Grâce à BUT, profitez de jusqu'à 95€ offerts sur vos repas. Une cuisine équipée, c'est bien. Une cuisine qui régale, c'est mieux ! C...">Coup de ❤️ BUT : HelloFresh Grâce à BUT, profitez de jusqu'à 95€ offerts sur vos repas. Une cuisine équipée, c'est bien. Une cuisine qui régale, c'est mieux ! C...</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Received</span>
                        <span class="meta-val">19/02/2026 à 09:13</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">CRM</span>
                        <span class="meta-val text-cyan" style="font-weight: 700;">Unknown</span>
                    </div>
                </div>

                <!-- Technical -->
                <div class="meta-section">
                    <div class="meta-section-title">Technical</div>
                    <div class="meta-row">
                        <span class="meta-key">Size</span>
                        <span class="meta-val text-yellow">27.6 KB</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Clipping Risk</span>
                        <span class="meta-val text-green"
                            style="font-weight: 700;">
                            Low
                        </span>
                    </div>
                </div>

                <!-- Tracking Pixels -->
                
                <div class="meta-section">
                    <div class="meta-section-title">Tracking Pixels (1)</div>
                    
                    <div class="link-card-v2" style="cursor: default; border-color: var(--accent-green); opacity: 0.9;">
                        <div class="card-v2-header" style="background: rgba(80, 250, 123, 0.05);">
                            <span class="card-v2-index" style="background: var(--accent-green);">P</span>
                            <span class="card-v2-domain">api.getinside.media</span>
                            <span class="card-v2-tag"
                                style="color: var(--accent-green); background: rgba(80, 250, 123, 0.1);">PIXEL</span>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text text-green">Integration: OK</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://api.getinside.media/v1/emails/track/6984c4f02c604</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://api.getinside.media/v1/emails/track/6984c4f02c604')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
                

                <!-- All Links -->
                <div class="meta-section" style="flex: 1;">
                    <div class="meta-section-title">Links (4)</div>
                    
                    <div class="link-card-v2" onclick="highlightLink(1)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">1</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            <div style="display: flex; gap: 4px;">
                                
                                
                                
                            </div>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text"></div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/6984c4f02ae69</code>

                                <div
                                    style="display: flex; gap: 8px; margin-top: 8px; padding-top: 8px; justify-content: flex-end;">
                                    <button class="btn-card" title="Verify Link"
                                        onclick="event.stopPropagation(); runAudit(this, 'https://gtinsi.de/6984c4f02ae69', 1)">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                    </button>
                                    <button class="btn-card" title="Copy URL"
                                        onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/6984c4f02ae69')">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Audit Log Container -->
                            <div class="audit-log-container">
                                <div class="audit-status-bar">
                                    <span class="audit-status-text">Scanning...</span>
                                </div>
                                <div class="audit-timeline">
                                    <!-- Log items will be injected here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(2)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">2</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            <div style="display: flex; gap: 4px;">
                                
                                
                                
                            </div>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">J'EN PROFITE ►</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/6984c4f02ae69</code>

                                <div
                                    style="display: flex; gap: 8px; margin-top: 8px; padding-top: 8px; justify-content: flex-end;">
                                    <button class="btn-card" title="Verify Link"
                                        onclick="event.stopPropagation(); runAudit(this, 'https://gtinsi.de/6984c4f02ae69', 2)">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                    </button>
                                    <button class="btn-card" title="Copy URL"
                                        onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/6984c4f02ae69')">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Audit Log Container -->
                            <div class="audit-log-container">
                                <div class="audit-status-bar">
                                    <span class="audit-status-text">Scanning...</span>
                                </div>
                                <div class="audit-timeline">
                                    <!-- Log items will be injected here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(3)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">3</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            <div style="display: flex; gap: 4px;">
                                
                                
                                
                            </div>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text"></div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/6984c4f02ae69</code>

                                <div
                                    style="display: flex; gap: 8px; margin-top: 8px; padding-top: 8px; justify-content: flex-end;">
                                    <button class="btn-card" title="Verify Link"
                                        onclick="event.stopPropagation(); runAudit(this, 'https://gtinsi.de/6984c4f02ae69', 3)">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                    </button>
                                    <button class="btn-card" title="Copy URL"
                                        onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/6984c4f02ae69')">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Audit Log Container -->
                            <div class="audit-log-container">
                                <div class="audit-status-bar">
                                    <span class="audit-status-text">Scanning...</span>
                                </div>
                                <div class="audit-timeline">
                                    <!-- Log items will be injected here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(4)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">4</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            <div style="display: flex; gap: 4px;">
                                
                                
                                
                            </div>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">JE COMMANDE MA BOX</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/6984c4f02ae69</code>

                                <div
                                    style="display: flex; gap: 8px; margin-top: 8px; padding-top: 8px; justify-content: flex-end;">
                                    <button class="btn-card" title="Verify Link"
                                        onclick="event.stopPropagation(); runAudit(this, 'https://gtinsi.de/6984c4f02ae69', 4)">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                        </svg>
                                    </button>
                                    <button class="btn-card" title="Copy URL"
                                        onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/6984c4f02ae69')">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Audit Log Container -->
                            <div class="audit-log-container">
                                <div class="audit-status-bar">
                                    <span class="audit-status-text">Scanning...</span>
                                </div>
                                <div class="audit-timeline">
                                    <!-- Log items will be injected here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- Sticky Footer in Sidebar -->
            <div class="sidebar-footer">
                <p style="font-size: 0.75rem; color: var(--text-muted); text-align: center; margin: 0;">
                    © 2025 <a href="https://github.com/benoit-prentout" target="_blank"
                        style="color: var(--accent-cyan); text-decoration: underline dotted; font-weight: 600;">Benoît
                        Prentout</a>.
                    All rights reserved.
                </p>
            </div>
        </aside>
    </div>



    <!-- Link overlays container -->
    <div id="linkOverlays" style="position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100;"></div>

    <script src="../assets/js/main.js"></script>
    <script>
        const content = "<!DOCTYPE html>\n\n<html dir=\"auto\" lang=\"und\" xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:v=\"urn:schemas-microsoft-com:vml\"><head><title>Coup de \u2764\ufe0f BUT : HelloFresh</title><!--[if !mso]><!--><meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/><!--<![endif]--><meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/><meta content=\"width=device-width,initial-scale=1\" name=\"viewport\"/><style type=\"text/css\">#outlook a { padding:0; }\n      body { margin:0;padding:0;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%; }\n      table, td { border-collapse:collapse;mso-table-lspace:0pt;mso-table-rspace:0pt; }\n      img { border:0;height:auto;line-height:100%; outline:none;text-decoration:none;-ms-interpolation-mode:bicubic; }\n      p { display:block;margin:13px 0; }</style><!--[if mso]>\n    <noscript>\n    <xml>\n    <o:OfficeDocumentSettings>\n      <o:AllowPNG/>\n      <o:PixelsPerInch>96</o:PixelsPerInch>\n    </o:OfficeDocumentSettings>\n    </xml>\n    </noscript>\n    <![endif]--><!--[if lte mso 11]>\n    <style type=\"text/css\">\n      .mj-outlook-group-fix { width:100% !important; }\n    </style>\n    <![endif]--><style type=\"text/css\">@media only screen and (min-width:480px) {\n        .mj-column-per-100 { width:100% !important; max-width: 100%; }\n.mj-column-per-50 { width:50% !important; max-width: 50%; }\n      }</style><style media=\"screen and (min-width:480px)\">.moz-text-html .mj-column-per-100 { width:100% !important; max-width: 100%; }\n.moz-text-html .mj-column-per-50 { width:50% !important; max-width: 50%; }</style><style type=\"text/css\">@media only screen and (max-width:479px) {\n      table.mj-full-width-mobile { width: 100% !important; }\n      td.mj-full-width-mobile { width: auto !important; }\n    }</style><style type=\"text/css\">.hide-mobile { display: none !important; }\n      .but-red { color: #EA2504 !important; }\n      \n      /* GESTION DU DARK MODE CSS */\n      :root {\n        color-scheme: light dark;\n        supported-color-schemes: light dark;\n      }\n\n      /* Transformation en BLOC MONOCHROME SOLIDE SANS OMBRE (Flat Design) */\n      .coupon-box { \n        background-color: #ffffff !important; \n        border-radius: 8px !important; \n        overflow: hidden !important; \n        border: 1px solid #E0E0E0 !important;\n      }\n      /* Code promo : Bloc solide gris clair */\n      .promo-code { background-color: #F4F4F4; color: #EA2504; padding: 10px 20px; font-weight: 900; border-radius: 4px; display: inline-block; font-size: 16px; letter-spacing: 1px; }\n      .impact-text { font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif !important; }</style><!-- TITRE ET PRE-HEADER MIS \u00c0 JOUR SELON VOTRE R\u00c9FLEXION --><!-- META TAGS POUR LE DARK MODE (Am\u00e9liore le support global) --><meta content=\"light dark\" name=\"color-scheme\"/><meta content=\"light dark\" name=\"supported-color-schemes\"/></head><body style=\"word-spacing:normal;background-color:#F4F4F4;\"><div style=\"display:none;font-size:1px;color:#ffffff;line-height:1px;max-height:0px;max-width:0px;opacity:0;overflow:hidden;\">Gr\u00e2ce \u00e0 BUT, profitez de jusqu'\u00e0 95\u20ac offerts sur vos repas.</div><div aria-label=\"Coup de \u2764\ufe0f BUT : HelloFresh\" aria-roledescription=\"email\" dir=\"auto\" lang=\"und\" role=\"article\" style=\"background-color:#F4F4F4;\"><!-- HERO IMAGE STANDARD (Redimensionnement mobile parfait) --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:640px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:0;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:640px;\"><a data-index=\"1\" href=\"https://gtinsi.de/6984c4f02ae69\" target=\"_blank\"><img alt=\"D\u00e9couvrir l'offre HelloFresh\" height=\"auto\" src=\"img_0.jpg\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"640\"/></a></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- TITRE ACCROCHE --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 20px 10px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><!-- TITRE BUT : ROUGE MIS \u00c0 JOUR --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:0px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:20px;font-weight:900;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">Une cuisine \u00e9quip\u00e9e, c'est bien.<br/>Une cuisine qui r\u00e9gale, c'est mieux !</div></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- EDITORIAL CONTEXT --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px 20px 20px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:14px;line-height:20px;text-align:center;color:#333333;\">Chez <strong>BUT</strong>, nous aimons vous aider \u00e0 cr\u00e9er une cuisine conviviale. Mais nous savons que ce qui compte le plus, c'est ce que vous y partagez.<br/><br/>D\u00e9couvrez <strong>HelloFresh</strong> : des ingr\u00e9dients frais livr\u00e9s chez vous pour cuisiner simplement.</div></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- OFFER BLOCK STYLE \"CARTE SOLIDE\" SANS OMBRE --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px 20px 20px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"coupon-box-outlook\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix coupon-box\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding:25px 15px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><!-- PRIX OPTIMIS\u00c9 MOBILE (32px) EN ROUGE BUT --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-top:5px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:32px;font-weight:900;line-height:36px;text-align:center;text-transform:uppercase;color:#EA2504;\">JUSQU'\u00c0 95\u20ac OFFERTS*</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:15px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:16px;font-weight:bold;line-height:20px;text-align:center;text-transform:uppercase;color:#333333;\">+ VOTRE DESSERT \u00c0 VIE !*</div></td></tr><!-- CODE PROMO --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:20px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:14px;line-height:24px;text-align:center;color:#333333;\">Votre code avantage :<br/><br/><span class=\"promo-code\">BUTF4L26</span></div></td></tr><!-- CTA --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:separate;line-height:100%;\"><tbody><tr><td align=\"center\" bgcolor=\"#EA2504\" role=\"presentation\" style=\"border:none;border-radius:4px;cursor:auto;mso-padding-alt:15px 30px;background:#EA2504;\" valign=\"middle\"><a data-index=\"2\" href=\"https://gtinsi.de/6984c4f02ae69\" style=\"display:inline-block;background:#EA2504;color:#ffffff;font-family:Helvetica, Arial, sans-serif;font-size:16px;font-weight:bold;line-height:120%;margin:0;text-decoration:none;text-transform:uppercase;padding:15px 30px;mso-padding-alt:0px;border-radius:4px;\" target=\"_blank\">J'EN PROFITE \u25ba</a></td></tr></tbody></table></td></tr><!-- TEXTE AVEC AST\u00c9RISQUE --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-top:15px;padding-bottom:0px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:12px;line-height:24px;text-align:center;color:#555555;\">Soit de d\u00e9licieux repas <strong>\u00e0 partir de moins de 3 \u20ac par assiette*</strong>.</div></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- ARGUMENTS --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:10px 10px 0px 10px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:310px;\" ><![endif]--><div class=\"mj-column-per-50 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding-bottom:20px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:30px;line-height:24px;text-align:center;color:#333333;\">\ud83d\udce6</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:13px;font-weight:bold;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">Livraison flexible</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:12px;line-height:16px;text-align:center;color:#555555;\">Choisissez votre cr\u00e9neau de 8h \u00e0 22h.</div></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td><td class=\"\" style=\"vertical-align:top;width:310px;\" ><![endif]--><div class=\"mj-column-per-50 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding-bottom:20px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:30px;line-height:24px;text-align:center;color:#333333;\">\ud83e\udd55</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:13px;font-weight:bold;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">Ingr\u00e9dients frais</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:12px;line-height:16px;text-align:center;color:#555555;\">Produits de qualit\u00e9 s\u00e9lectionn\u00e9s avec soin.</div></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td><td class=\"\" style=\"vertical-align:top;width:310px;\" ><![endif]--><div class=\"mj-column-per-50 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding-bottom:20px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:30px;line-height:24px;text-align:center;color:#333333;\">\ud83e\udd57</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:13px;font-weight:bold;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">Vari\u00e9t\u00e9 au menu</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:12px;line-height:16px;text-align:center;color:#555555;\">45 nouvelles recettes chaque semaine.</div></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td><td class=\"\" style=\"vertical-align:top;width:310px;\" ><![endif]--><div class=\"mj-column-per-50 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding-bottom:20px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:30px;line-height:24px;text-align:center;color:#333333;\">\ud83e\udd33</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:5px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:13px;font-weight:bold;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">Sans engagement</div></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:12px;line-height:16px;text-align:center;color:#555555;\">Suspendez votre abonnement en un clic.</div></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- SECTION VISUEL PLATS & TEXTE --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:10px 20px 20px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><!-- S\u00e9parateur SOLIDE --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:25px;word-break:break-word;\"><p style=\"border-top:solid 1px #E0E0E0;font-size:1px;margin:0px auto;width:100%;\"></p><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"border-top:solid 1px #E0E0E0;font-size:1px;margin:0px auto;width:550px;\" role=\"presentation\" width=\"550px\" ><tr><td style=\"height:0;line-height:0;\"> &nbsp;\n</td></tr></table><![endif]--></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:15px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:18px;font-weight:900;line-height:24px;text-align:center;text-transform:uppercase;color:#EA2504;\">De l'inspiration dans votre assiette</div></td></tr><!-- IMAGE SECONDAIRE CLIQUABLE --><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:550px;\"><a data-index=\"3\" href=\"https://gtinsi.de/6984c4f02ae69\" target=\"_blank\"><img alt=\"Plats savoureux HelloFresh\" height=\"auto\" src=\"img_1.png\" style=\"border:0;border-radius:8px;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"550\"/></a></td></tr></tbody></table></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-top:15px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:14px;line-height:20px;text-align:center;color:#333333;\"><strong>En manque d'id\u00e9es ?</strong><br/>Retrouvez chaque semaine 45 nouvelles recettes au menu : classiques, familiales, express ou encore v\u00e9g\u00e9tariennes. Cuisinez des plats savoureux en moins de 30 minutes gr\u00e2ce \u00e0 nos fiches-recettes pas \u00e0 pas.</div></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- HOW IT WORKS --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:10px 20px 30px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:separate;\" width=\"100%\"><tbody><tr><td style=\"background-color:#F4F4F4;border-radius:8px;vertical-align:top;border-collapse:separate;padding:20px 15px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-bottom:15px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:16px;font-weight:900;line-height:24px;text-align:center;text-transform:uppercase;color:#333333;\">Comment \u00e7a marche ?</div></td></tr><tr><td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"color:#000000;font-family:Helvetica, Arial, sans-serif;font-size:13px;line-height:22px;table-layout:auto;width:100%;border:none;\" width=\"100%\"><tr><td style=\"font-weight: 900; color: #EA2504; font-size: 16px; line-height: 20px;\" valign=\"top\" width=\"25\">1.</td><td style=\"padding-bottom: 10px; font-size: 13px; line-height: 18px; color: #333333;\"><strong>Cliquez sur le bouton</strong> (code int\u00e9gr\u00e9).</td></tr><tr><td style=\"font-weight: 900; color: #EA2504; font-size: 16px; line-height: 20px;\" valign=\"top\" width=\"25\">2.</td><td style=\"padding-bottom: 10px; font-size: 13px; line-height: 18px; color: #333333;\">Cr\u00e9ez votre <strong>Box sur mesure</strong>.</td></tr><tr><td style=\"font-weight: 900; color: #EA2504; font-size: 16px; line-height: 20px;\" valign=\"top\" width=\"25\">3.</td><td style=\"padding-bottom: 10px; font-size: 13px; line-height: 18px; color: #333333;\">Choisissez vos recettes.</td></tr><tr><td style=\"font-weight: 900; color: #EA2504; font-size: 16px; line-height: 20px;\" valign=\"top\" width=\"25\">4.</td><td style=\"padding-bottom: 0; font-size: 13px; line-height: 18px; color: #333333;\">Recevez votre box !</td></tr></table></td></tr><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;padding-top:20px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:separate;width:100%;line-height:100%;\"><tbody><tr><td align=\"center\" bgcolor=\"#EA2504\" role=\"presentation\" style=\"border:none;border-radius:4px;cursor:auto;mso-padding-alt:15px 30px;background:#EA2504;\" valign=\"middle\"><a data-index=\"4\" href=\"https://gtinsi.de/6984c4f02ae69\" style=\"display:inline-block;background:#EA2504;color:#ffffff;font-family:Helvetica, Arial, sans-serif;font-size:16px;font-weight:bold;line-height:120%;margin:0;text-decoration:none;text-transform:uppercase;padding:15px 30px;mso-padding-alt:0px;border-radius:4px;\" target=\"_blank\">JE COMMANDE MA BOX</a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--><!-- FOOTER LEGAL COMPLET --><!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" role=\"presentation\" style=\"width:640px;\" width=\"640\" bgcolor=\"#ffffff\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]--><div style=\"background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:640px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px 20px 30px 20px;text-align:center;\"><!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:600px;\" ><![endif]--><div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"justify\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica, Arial, sans-serif;font-size:9px;line-height:13px;text-align:justify;color:#999999;\">*Conditions de l\u2019offre : pour toute souscription, jusqu\u2019\u00e0 95 \u20ac de r\u00e9duction sur vos 5 premi\u00e8res Box (jusqu'\u00e0 40 \u20ac sur la 1\u00e8re, 20 \u20ac sur la 2\u00e8me, 15 \u20ac sur la 3\u00e8me et 10 \u20ac sur la 4\u00e8me et 5\u00e8me). Cette offre est valable pendant 9 semaines, \u00e0 compter de votre date de conversion. A d\u00e9faut d\u2019utilisation de votre r\u00e9duction pass\u00e9 ce d\u00e9lai, celle-ci ne sera plus valable. La premi\u00e8re r\u00e9duction de 40 \u20ac inclut les frais de livraison qui sont offerts pour la 1\u00e8re Box uniquement. Cette offre comprend \u00e9galement un extra de notre march\u00e9 HelloFresh offert chaque semaine parmi une s\u00e9lection de produits tant que l\u2019abonnement n\u2019est pas r\u00e9sili\u00e9. L\u2019ajout de cet extra ne se fait pas automatiquement mais doit \u00eatre fait par vos soins au moment du choix des recettes. HelloFresh se r\u00e9serve le droit de remplacer le produit choisi si jamais celui-ci n\u2019est plus disponible.Offre devant \u00eatre activ\u00e9e avant le 28/02/2026, offre r\u00e9serv\u00e9e aux nouveaux clients HelloFresh seulement, non cumulable avec d\u2019autres offres ou r\u00e9ductions, limit\u00e9e \u00e0 une par foyer et ne donnant droit \u00e0 aucun \u00e9change, ni remboursement du montant de la r\u00e9duction. Les abonn\u00e9.e.s HelloFresh re\u00e7oivent chaque semaine une Box mais l\u2019abonnement est flexible. Les abonn\u00e9.e.s HelloFresh ont jusqu\u2019\u00e0 la date indiqu\u00e9e en haut de l\u2019onglet \u201cMon Menu\u201d (23h59) sur le site HelloFresh pour mettre en pause leur prochaine Box ou r\u00e9silier leur abonnement. Toute demande de modification, de pause ou de r\u00e9siliation faite apr\u00e8s cette date ne sera prise en compte qu\u2019apr\u00e8s la prochaine Box. Plus d\u2019informations sur :\u00a0http://www.hellofresh.fr/conditions-generales.</div></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--></td></tr></tbody></table></div><!--[if mso | IE]></td></tr></table><![endif]--> <!-- TRACKING PIXEL (RAW) --><img alt=\"\" height=\"1\" src=\"\" style=\"display:none !important;\" width=\"1\"/></div></body></html>";
        const emailLinks = [{"index": 1, "txt": "", "original_url": "https://gtinsi.de/6984c4f02ae69", "final_url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92", "domain": "gtinsi.de", "is_tracking": false, "is_secure": true, "is_dev": false, "redirect_chain": [{"status": 302, "url": "https://gtinsi.de/6984c4f02ae69"}, {"status": 200, "url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92"}], "audit_date": "2026-02-19 17:14:25"}, {"index": 2, "txt": "J'EN PROFITE \u25ba", "original_url": "https://gtinsi.de/6984c4f02ae69", "final_url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92", "domain": "gtinsi.de", "is_tracking": false, "is_secure": true, "is_dev": false, "redirect_chain": [{"status": 302, "url": "https://gtinsi.de/6984c4f02ae69"}, {"status": 200, "url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92"}], "audit_date": "2026-02-19 17:14:25"}, {"index": 3, "txt": "", "original_url": "https://gtinsi.de/6984c4f02ae69", "final_url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92", "domain": "gtinsi.de", "is_tracking": false, "is_secure": true, "is_dev": false, "redirect_chain": [{"status": 302, "url": "https://gtinsi.de/6984c4f02ae69"}, {"status": 200, "url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92"}], "audit_date": "2026-02-19 17:14:25"}, {"index": 4, "txt": "JE COMMANDE MA BOX", "original_url": "https://gtinsi.de/6984c4f02ae69", "final_url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92", "domain": "gtinsi.de", "is_tracking": false, "is_secure": true, "is_dev": false, "redirect_chain": [{"status": 302, "url": "https://gtinsi.de/6984c4f02ae69"}, {"status": 200, "url": "https://www.hellofresh.fr/pages/value-messaging?c=BUTF4L26&utm_source=But&utm_medium=NL&utm_campaign=But_partnerships&utm_content=act_partnerships_partnershipsothers&vs_campaign_id=3b1ea624-4462-4bbe-9cfd-1fde9d6a9ac4&discount_comm_id=163573c4-5828-4254-b4c2-9ea634844d92"}], "audit_date": "2026-02-19 17:14:25"}];
        const frame = document.getElementById('emailFrame');
        let linksHighlighted = false;
        let overlayElements = [];
        let lastHighlightedIdx = null;
        let spotlightTimeout = null;

        function init() {
            const doc = frame.contentDocument;
            doc.open();
            doc.write(content);
            doc.close();

            const style = doc.createElement('style');
            style.innerHTML = `
                :root {
                    --spotlight-dim: rgba(0, 0, 0, 0.6);
                    --spotlight-glow: #50FA7B;
                }
                [data-theme="dark"] {
                    /* In Dark Mode (Inverted), we want the dimming to be light so it inverts to dark */
                    --spotlight-dim: rgba(255, 255, 255, 0.7);
                    /* And we use the complement of green so it inverts back to green */
                    --spotlight-glow: #AF0584; 
                }
                body { margin: 0; font-family: sans-serif; background: #fff; position: relative; }
                .link-outline { 
                    outline: 2px solid #8BE9FD !important; /* Cyan */
                    outline-offset: 1px !important;
                    transition: outline 0.2s ease;
                }
                .link-highlight-pulse {
                    animation: link-pulse 2s infinite;
                }
                @keyframes link-pulse {
                    0% { outline-color: #8BE9FD; outline-width: 2px; }
                    50% { outline-color: #BD93F9; outline-width: 4px; outline-offset: 3px; }
                    100% { outline-color: #8BE9FD; outline-width: 2px; }
                }
                .link-flash-spotlight {
                    position: relative !important;
                    z-index: 2147483647 !important;
                    outline: 8px solid var(--spotlight-glow) !important;
                    outline-offset: 4px !important;
                    box-shadow: 0 0 0 10000px var(--spotlight-dim), 0 0 40px var(--spotlight-glow) !important;
                    background-color: rgba(255, 255, 255, 1) !important;
                    color: #282a36 !important;
                }
            `;
            doc.head.appendChild(style);

            const theme = localStorage.getItem('theme') || 'light';
            if (theme === 'dark') applyTheme('dark');
        }

        function setMode(mode) {
            const frameEl = document.getElementById('deviceFrame');
            const iframeEl = document.getElementById('emailFrame');

            document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
            const btn = document.querySelector(`.device-btn[onclick*="${mode}"]`);
            if (btn) btn.classList.add('active');

            // Remove/add scrollbar class
            if (mode === 'mobile') {
                frameEl.style.maxWidth = '375px';
                iframeEl.classList.add('no-scrollbar');
            } else if (mode === 'tablet') {
                frameEl.style.maxWidth = '600px';
                iframeEl.classList.add('no-scrollbar');
            } else {
                frameEl.style.maxWidth = '800px';
                iframeEl.classList.remove('no-scrollbar');
            }

            // Update overlays if visible
            if (linksHighlighted) {
                setTimeout(updateOverlays, 150);
            }
        }

        function highlightLink(idx) {
            const doc = frame.contentDocument;
            const link = doc.querySelector(`[data-index="${idx}"]`);
            if (link) {
                // Toggle Logic: If clicking the same link again, remove highlight
                if (lastHighlightedIdx === idx) {
                    doc.querySelectorAll('.link-flash-spotlight').forEach(el => el.classList.remove('link-flash-spotlight'));
                    if (!linksHighlighted) {
                        link.classList.remove('link-outline');
                    }
                    lastHighlightedIdx = null;
                    if (spotlightTimeout) clearTimeout(spotlightTimeout);
                    return;
                }

                lastHighlightedIdx = idx;

                // Ensure it's scrolled into view
                link.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Remove existing flash/spotlight from others
                doc.querySelectorAll('.link-flash-spotlight').forEach(el => el.classList.remove('link-flash-spotlight'));

                // Add spotlight class (this dims the rest of the iframe via large box-shadow)
                link.classList.add('link-flash-spotlight');

                // If Show Links is off, temporarily show this one's overlay/outline
                const wasHighlighted = linksHighlighted;
                if (!wasHighlighted) {
                    link.classList.add('link-outline');
                }

                if (spotlightTimeout) clearTimeout(spotlightTimeout);
                spotlightTimeout = setTimeout(() => {
                    link.classList.remove('link-flash-spotlight');
                    if (!wasHighlighted) {
                        link.classList.remove('link-outline');
                    }
                    if (lastHighlightedIdx === idx) lastHighlightedIdx = null;
                }, 4000); // 4 seconds spotlight
            }
        }

        function toggleHighlightLinks() {
            linksHighlighted = !linksHighlighted;
            const btn = document.getElementById('highlightBtnText');
            btn.textContent = linksHighlighted ? 'Hide Links' : 'Show Links';

            if (linksHighlighted) {
                createOverlays();
            } else {
                removeOverlays();
            }
        }

        function createOverlays() {
            removeOverlays();
            const doc = frame.contentDocument;
            const links = doc.querySelectorAll('[data-index]');
            const container = document.getElementById('linkOverlays');
            const frameRect = frame.getBoundingClientRect();

            links.forEach(link => {
                const idx = link.getAttribute('data-index');
                let rect = link.getBoundingClientRect();

                // Advanced Dimension Check: If element is "empty" or "inline-collapsed", check children or use parent
                if (rect.width <= 2 || rect.height <= 2) {
                    const children = link.querySelectorAll('img, table, div, span, p');
                    let found = false;
                    for (let child of children) {
                        const childRect = child.getBoundingClientRect();
                        if (childRect.width > 2 && childRect.height > 2) {
                            rect = childRect;
                            found = true;
                            break;
                        }
                    }
                    // If still no size, it might be a text-only link that is display: inline
                    // Try to get a range client rect if possible
                    if (!found) {
                        try {
                            const range = doc.createRange();
                            range.selectNodeContents(link);
                            const rangeRect = range.getBoundingClientRect();
                            if (rangeRect.width > 0) {
                                rect = rangeRect;
                            }
                        } catch (e) {
                            console.warn("Could not calculate range rect for link", idx);
                        }
                    }
                }

                // Final safety skip
                if (rect.width === 0 || rect.height === 0) return;

                // Clipping Logic: Only show badge if link is at least partially visible in iframe viewport
                // rect is relative to iframe viewport
                const iframeHeight = frame.clientHeight;
                const iframeWidth = frame.clientWidth;

                // If the link is fully out of view, skip it
                if (rect.bottom < 0 || rect.top > iframeHeight || rect.right < 0 || rect.left > iframeWidth) {
                    return;
                }

                // Create overlay badge
                const badge = document.createElement('div');
                badge.className = 'link-overlay-badge';
                badge.textContent = idx;

                // Position badge: top-right calculation relative to main window
                let badgeX, badgeY;
                if (rect.width < 15) {
                    badgeX = frameRect.left + rect.left + (rect.width / 2) - 10;
                    badgeY = frameRect.top + rect.top - 20;
                } else {
                    badgeX = frameRect.left + rect.left + rect.width - 6;
                    badgeY = frameRect.top + rect.top - 12;
                }

                // Ensure the badge itself is clipped by the frame boundaries
                // (e.g. don't let it overlap the header if the link is at the very top edge)
                if (badgeY < frameRect.top) {
                    // If the link is partially visible at top but badge would be outside,
                    // we can either hide it or stick it to the edge. Let's hide for clean look.
                    return;
                }
                if (badgeY > frameRect.bottom - 20) {
                    return;
                }

                badge.style.cssText = `
                    position: fixed;
                    left: ${badgeX}px;
                    top: ${badgeY}px;
                    background: #BD93F9; /* Purple for badges */
                    color: #fff;
                    font-size: 11px;
                    font-weight: 800;
                    padding: 0px 6px;
                    min-width: 20px;
                    height: 20px;
                    line-height: 20px;
                    border-radius: 10px;
                    font-family: 'Inter', sans-serif;
                    z-index: 1000;
                    box-shadow: 0 3px 6px rgba(0,0,0,0.5), 0 0 0 2px rgba(255,255,255,0.8);
                    text-align: center;
                    border: none;
                    pointer-events: none;
                    opacity: 1;
                    transition: transform 0.2s ease;
                `;
                container.appendChild(badge);
                overlayElements.push(badge);

                // Add highlight to link in iframe
                link.classList.add('link-outline');
                link.classList.add('link-highlight-pulse');
            });
        }

        function removeOverlays() {
            const container = document.getElementById('linkOverlays');
            container.innerHTML = '';
            overlayElements = [];

            // Remove outlines from iframe links
            const doc = frame.contentDocument;
            if (doc) {
                const links = doc.querySelectorAll('[data-index]');
                links.forEach(link => {
                    link.classList.remove('link-outline');
                    link.classList.remove('link-highlight-pulse');
                    link.classList.remove('link-flash-spotlight');
                });
            }
        }

        function updateOverlays() {
            if (linksHighlighted) {
                createOverlays();
            }
        }

        // Update overlays logic
        frame.addEventListener('load', () => {
            frame.contentWindow.addEventListener('scroll', () => {
                if (linksHighlighted) updateOverlays();
            });
            frame.contentWindow.addEventListener('resize', () => {
                if (linksHighlighted) updateOverlays();
            });
        });



        function copyLink(btn, url) {
            navigator.clipboard.writeText(url).then(() => {
                const originalHtml = btn.innerHTML;
                // Temporarily show checkmark
                btn.innerHTML = '<span style="color: var(--accent-green); font-weight: bold;">✓</span>';
                btn.classList.add('copy-success');

                setTimeout(() => {
                    btn.innerHTML = originalHtml;
                    btn.classList.remove('copy-success');
                }, 1500);
            });
        }

        async function runAudit(btn, url, index) {
            // Find parent elements
            const cardBody = btn.closest('.card-v2-body');
            const logContainer = cardBody.querySelector('.audit-log-container');
            const timeline = logContainer.querySelector('.audit-timeline');
            const statusText = logContainer.querySelector('.audit-status-text');
            const linkData = emailLinks.find(l => l.index === index);

            // Reset UI
            logContainer.classList.add('active');
            timeline.innerHTML = '';
            statusText.innerHTML = 'Initiating Audit...';
            statusText.className = 'audit-status-text text-yellow';

            // Allow animation
            await new Promise(r => setTimeout(r, 300));

            try {
                if (linkData && linkData.redirect_chain && linkData.redirect_chain.length > 0) {
                    const auditDateStr = linkData.audit_date ? `<br><small style="opacity: 0.7; font-size: 0.8em;">Audit: ${linkData.audit_date}</small>` : '';
                    statusText.innerHTML = 'Analyzing Redirection Chain...' + auditDateStr;

                    let containsGtinsi = false;
                    for (let i = 0; i < linkData.redirect_chain.length; i++) {
                        const step = linkData.redirect_chain[i];
                        const isLast = i === linkData.redirect_chain.length - 1;
                        const isGtinsi = step.url && step.url.includes('gtinsi.de');
                        if (isGtinsi) containsGtinsi = true;

                        const stepClass = isGtinsi ? 'audit-step highlighted' : 'audit-step';

                        // Display the step
                        if (!isLast) {
                            // It's a redirect step
                            const nextStep = linkData.redirect_chain[i + 1];
                            timeline.innerHTML += `<div class="${stepClass}"><strong>${step.status}</strong> &rarr; ${nextStep.url}</div>`;
                        } else {
                            // It's the final destination
                            const statusColor = (step.status === 200) ? 'text-green' : (step.status >= 400 || step.status === 'Error' || step.status === 'Timeout' ? 'text-red' : 'text-cyan');
                            const statusIcon = (step.status === 200) ? 'final' : (step.status >= 400 || step.status === 'Error' || step.status === 'Timeout' ? 'error' : '');

                            timeline.innerHTML += `<div class="audit-step ${statusIcon}"><strong>${step.status || 'Done'}</strong> &bull; ${step.url}</div>`;

                            // Update status text
                            if (step.status === 200) {
                                statusText.innerHTML = containsGtinsi ? 'Verification Complete (GTINSI Detected)' : 'Verification Complete';
                            } else if (step.status === 'Timeout') {
                                statusText.innerHTML = 'Request Timed Out';
                            } else if (step.status >= 400 || step.status === 'Error') {
                                statusText.innerHTML = 'Audit Finished (Error Found)';
                            } else {
                                statusText.innerHTML = 'Audit Finished';
                            }

                            statusText.className = `audit-status-text ${statusColor}`;
                            btn.style.color = (step.status === 200) ? 'var(--accent-green)' : (step.status >= 400 || step.status === 'Error' || step.status === 'Timeout' ? 'var(--accent-red)' : 'var(--accent-cyan)');
                        }
                        await new Promise(r => setTimeout(r, 400));
                    }
                } else {
                    // Fallback for archives created before this feature or if resolution failed
                    timeline.innerHTML += `<div class="audit-step"><strong>INFO</strong> Pre-calculated redirect data missing.</div>`;
                    timeline.innerHTML += `<div class="audit-step"><strong>URL</strong> ${url}</div>`;
                    await new Promise(r => setTimeout(r, 600));
                    timeline.innerHTML += `<div class="audit-step final"><strong>ACTION</strong> Please re-archive this email to enable full redirect auditing.</div>`;
                    statusText.innerHTML = 'Direct Link Check';
                    statusText.className = 'audit-status-text text-yellow';
                    btn.style.color = 'var(--accent-yellow)';
                }

            } catch (e) {
                console.error("Audit error:", e);
                statusText.innerHTML = 'Analysis Error';
                statusText.className = 'audit-status-text text-red';
            }
        }

        async function downloadEmailZip() {
            try {
                const zip = new JSZip();
                const subject = "Coup de coeur BUT : HelloFresh".replace(/[^a-z0-9]/gi, '_').toLowerCase();
                const timestamp = new Date().toISOString().split('T')[0];
                const zipFilename = `${subject}_${timestamp}.zip`;

                // Get all images from the current directory
                const currentPath = window.location.pathname;
                const emailDir = currentPath.substring(0, currentPath.lastIndexOf('/'));

                // Find all image references in the HTML
                const doc = frame.contentDocument;
                const images = doc.querySelectorAll('img[src]');

                // Create a folder for images
                const imgFolder = zip.folder("images");

                // Download each image and track the mapping
                let downloadCount = 0;
                const imagePromises = [];
                const imageMapping = new Map(); // old path -> new path

                images.forEach((img, index) => {
                    const imgSrc = img.getAttribute('src');
                    if (imgSrc && !imgSrc.startsWith('data:') && !imgSrc.startsWith('http')) {
                        // It's a local image
                        const imgPath = emailDir + '/' + imgSrc;
                        const imgFilename = imgSrc.split('/').pop();

                        // Store the mapping: old src -> new path in zip
                        imageMapping.set(imgSrc, 'images/' + imgFilename);

                        const promise = fetch(imgPath)
                            .then(response => {
                                if (response.ok) {
                                    return response.blob();
                                }
                                throw new Error(`Failed to fetch ${imgFilename}`);
                            })
                            .then(blob => {
                                imgFolder.file(imgFilename, blob);
                                downloadCount++;
                            })
                            .catch(err => {
                                console.warn(`Could not download ${imgFilename}:`, err);
                            });

                        imagePromises.push(promise);
                    }
                });

                // Wait for all images to be added
                await Promise.all(imagePromises);

                // Fix image paths in HTML content
                let fixedHtml = content;
                imageMapping.forEach((newPath, oldPath) => {
                    // Replace all occurrences of the old path with the new path
                    const regex = new RegExp(oldPath.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                    fixedHtml = fixedHtml.replace(regex, newPath);
                });

                // Add HTML content with fixed paths
                zip.file("email.html", fixedHtml);

                // Generate zip file
                const blob = await zip.generateAsync({ type: "blob" });

                // Create download link
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = zipFilename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                console.log(`Downloaded ${downloadCount} images and HTML as ${zipFilename}`);
            } catch (error) {
                console.error('Error creating zip file:', error);
                alert('Failed to create download. Please try again.');
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === '1') setMode('mobile');
            if (e.key === '2') setMode('tablet');
            if (e.key === '3') setMode('desktop');
            if (e.key === 't' || e.key === 'T') toggleTheme();
            if (e.key === 'h' || e.key === 'H') toggleHighlightLinks();
            if (e.key === 'd' || e.key === 'D') downloadEmailZip();

            // Scroll iframe with arrows
            if (e.key === 'ArrowDown') frame.contentWindow.scrollBy(0, 150);
            if (e.key === 'ArrowUp') frame.contentWindow.scrollBy(0, -150);
        });

        init();
    </script>
</body>

</html>