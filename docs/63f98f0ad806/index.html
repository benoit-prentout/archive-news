<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[TEST] Une initiative deNoÃ«l qui nous tient Ã  cÅ“ur :dÃ©couvrez-la ğŸ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div class="viewer-layout">
        <!-- Main Content -->
        <div class="viewer-main">
            <!-- Header -->
            <header class="viewer-header">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <h1
                        style="font-family: var(--font-header); font-size: 1rem; font-weight: 600; margin: 0; max-width: 500px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--accent-blue);">
                        [TEST] Une initiative deNoÃ«l qui nous tient Ã  cÅ“ur :dÃ©couvrez-la ğŸ
                    </h1>
                </div>

                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="viewer-toolbar">
                        <button class="btn btn-secondary" onclick="toggleHighlightLinks()"
                            title="Highlight all links (H)">
                            <span id="highlightBtnText">Show Links</span>
                        </button>
                        <button class="btn btn-secondary" onclick="openHtmlModal()" title="View HTML (V)">
                            View HTML
                        </button>
                    </div>

                    <span class="crm-badge" data-crm="Unknown">Unknown</span>

                    <div class="device-toggle hide-mobile">
                        <button class="device-btn" onclick="setMode('mobile')" title="Mobile (1)">Mobile</button>
                        <button class="device-btn" onclick="setMode('tablet')" title="Tablet (2)">Tablet</button>
                        <button class="device-btn active" onclick="setMode('desktop')"
                            title="Desktop (3)">Desktop</button>
                    </div>

                    <button class="btn-icon" id="theme-toggle" onclick="toggleTheme()" title="Toggle Theme (T)">
                        <svg class="icon icon-moon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg class="icon icon-sun" style="display:none;" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Email Content -->
            <div class="viewer-content">
                <div id="deviceFrame" data-mode="desktop"
                    style="width: 100%; max-width: 800px; height: 100%; transition: max-width 0.3s ease;">
                    <iframe id="emailFrame" class="email-frame"></iframe>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="viewer-sidebar">
            <div class="sidebar-header">
                <span class="sidebar-title">Metadata</span>
            </div>

            <div class="sidebar-content">
                <!-- General Info -->
                <div class="meta-section">
                    <div class="meta-section-title">General</div>
                    <div class="meta-row">
                        <span class="meta-key">Sender</span>
                        <span class="meta-val">MonJardinBio.com</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Subject</span>
                        <span class="meta-val"
                            style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            title="[TEST] Une initiative deNoÃ«l qui nous tient Ã  cÅ“ur :dÃ©couvrez-la ğŸ">[TEST] Une initiative deNoÃ«l qui nous tient Ã  cÅ“ur :dÃ©couvrez-la ğŸ</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Preheader</span>
                        <span class="meta-val"
                            style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            title="un geste solidaire qui compte pour nous ğŸ™ Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­ ChÃ¨re Madame, Cher ...">un geste solidaire qui compte pour nous ğŸ™ Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­Â­ ChÃ¨re Madame, Cher ...</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Received</span>
                        <span class="meta-val">28/11/2025 Ã  17:40</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">CRM</span>
                        <span class="meta-val text-cyan" style="font-weight: 700;">Unknown</span>
                    </div>
                </div>

                <!-- Technical -->
                <div class="meta-section">
                    <div class="meta-section-title">Technical</div>
                    <div class="meta-row">
                        <span class="meta-key">Size</span>
                        <span class="meta-val text-yellow">18.5 KB</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-key">Clipping Risk</span>
                        <span class="meta-val text-green"
                            style="font-weight: 700;">
                            Low
                        </span>
                    </div>
                </div>

                <!-- Tracking Pixels -->
                
                <div class="meta-section">
                    <div class="meta-section-title">Tracking Pixels (1)</div>
                    
                    <div class="link-card-v2" style="cursor: default; border-color: var(--accent-green); opacity: 0.9;">
                        <div class="card-v2-header" style="background: rgba(80, 250, 123, 0.05);">
                            <span class="card-v2-index" style="background: var(--accent-green);">P</span>
                            <span class="card-v2-domain">api.getinside.media</span>
                            <span class="card-v2-tag"
                                style="color: var(--accent-green); background: rgba(80, 250, 123, 0.1);">PIXEL</span>
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text text-green">Integration: OK</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://api.getinside.media/v1/emails/track/69175371416ce</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://api.getinside.media/v1/emails/track/69175371416ce')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
                

                <!-- All Links -->
                <div class="meta-section" style="flex: 1;">
                    <div class="meta-section-title">Links (4)</div>
                    
                    <div class="link-card-v2" onclick="highlightLink(1)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">1</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">(no text)</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/691753713e2df</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/691753713e2df')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(2)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">2</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">(no text)</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/691753713e2df</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/691753713e2df')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(3)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">3</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">(no text)</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/691753713e2df</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/691753713e2df')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="link-card-v2" onclick="highlightLink(4)">
                        <div class="card-v2-header">
                            <span class="card-v2-index">4</span>
                            <span class="card-v2-domain">gtinsi.de</span>
                            
                        </div>
                        <div class="card-v2-body">
                            <div class="card-v2-text">(no text)</div>
                            <div class="card-v2-url-zone">
                                <code class="card-v2-url">https://gtinsi.de/691753713e2df</code>
                                <button class="card-v2-copy-btn"
                                    onclick="event.stopPropagation(); copyLink(this, 'https://gtinsi.de/691753713e2df')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- Sticky Footer in Sidebar -->
            <div class="sidebar-footer">
                <p style="font-size: 0.75rem; color: var(--text-muted); text-align: center; margin: 0;">
                    Â© 2025 <a href="https://github.com/benoit-prentout" target="_blank"
                        style="color: var(--accent-cyan); text-decoration: underline dotted; font-weight: 600;">BenoÃ®t
                        Prentout</a>.
                    All rights reserved.
                </p>
            </div>
        </aside>
    </div>

    <!-- HTML Source Modal -->
    <div class="modal-overlay" id="htmlModal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" style="color: var(--accent-blue);">HTML Source</span>
                <button class="modal-close" onclick="closeHtmlModal()">&times;</button>
            </div>
            <div class="modal-body">
                <pre class="code-block" id="htmlSourceCode"></pre>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="copyAllHtml()">Copy HTML</button>
            </div>
        </div>
    </div>

    <!-- Link overlays container -->
    <div id="linkOverlays" style="position: fixed; top: 0; left: 0; pointer-events: none; z-index: 100;"></div>

    <script src="../assets/js/main.js"></script>
    <script>
        const content = "<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:v=\"urn:schemas-microsoft-com:vml\"><head>\n<title></title>\n<meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<meta content=\"width=device-width,initial-scale=1\" name=\"viewport\"/>\n<style type=\"text/css\">#outlook a { padding:0; }\r\n          body { margin:0;padding:0;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%; }\r\n          table, td { border-collapse:collapse;mso-table-lspace:0pt;mso-table-rspace:0pt; }\r\n          img { border:0;height:auto;line-height:100%; outline:none;text-decoration:none;-ms-interpolation-mode:bicubic; }\r\n          p { display:block;margin:13px 0; }</style>\n<!--[if mso]>\r\n        <noscript>\r\n        <xml>\r\n        <o:OfficeDocumentSettings>\r\n          <o:AllowPNG/>\r\n          <o:PixelsPerInch>96</o:PixelsPerInch>\r\n        </o:OfficeDocumentSettings>\r\n        </xml>\r\n        </noscript>\r\n        <![endif]--><style type=\"text/css\">@media only screen and (min-width:480px) {\r\n        .mj-column-per-100 { width:100% !important; max-width: 100%; }\r\n.mj-column-px-600 { width:600px !important; max-width: 600px; }\r\n.mj-column-px-400 { width:400px !important; max-width: 400px; }\r\n.mj-column-px-239 { width:239px !important; max-width: 239px; }\r\n.mj-column-px-226 { width:226px !important; max-width: 226px; }\r\n.mj-column-per-15 { width:15% !important; max-width: 15%; }\r\n.mj-column-per-30 { width:30% !important; max-width: 30%; }\r\n.mj-column-per-50 { width:50% !important; max-width: 50%; }\r\n      }</style>\n<style media=\"screen and (min-width:480px)\">.moz-text-html .mj-column-per-100 { width:100% !important; max-width: 100%; }\r\n.moz-text-html .mj-column-px-600 { width:600px !important; max-width: 600px; }\r\n.moz-text-html .mj-column-px-400 { width:400px !important; max-width: 400px; }\r\n.moz-text-html .mj-column-px-239 { width:239px !important; max-width: 239px; }\r\n.moz-text-html .mj-column-px-226 { width:226px !important; max-width: 226px; }\r\n.moz-text-html .mj-column-per-15 { width:15% !important; max-width: 15%; }\r\n.moz-text-html .mj-column-per-30 { width:30% !important; max-width: 30%; }\r\n.moz-text-html .mj-column-per-50 { width:50% !important; max-width: 50%; }</style>\n<style type=\"text/css\">@media only screen and (max-width:480px) {\r\n      table.mj-full-width-mobile { width: 100% !important; }\r\n      td.mj-full-width-mobile { width: auto !important; }\r\n    }</style>\n<style type=\"text/css\">@media (max-width:499px) { .hidden-m { display: none; display: none\r\n      !important; } } @media (min-width:499px) { .hidden-d { display: none;\r\n      display: none !important; } } @media only screen and (min-width:480px) {\r\n      .desktop-border { border-right: 1px solid #DA324B; } }</style>\n</head>\n<body style=\"word-spacing:normal;background-color:#DA324B;\">\n<div style=\"display: none; font-size: 1px; line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden; mso-hide: all; font-family: sans-serif\">un geste solidaire qui compte pour nous \ud83d\ude4f</div>\n<div style=\"display: none; max-height: 0px; overflow: hidden\">\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u2007\u034f\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00a0</div>\n<div style=\"background-color:#DA324B;\">\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:middle;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:middle;\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:257px;\"><a data-index=\"1\" href=\"https://gtinsi.de/691753713e2df\" target=\"_blank\"><img alt=\"Logo PETITS FRERES DES PAUVRES, Non \u00e0 l'isolement de nos a\u00een\u00e9s\" height=\"auto\" src=\"img_0.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"257\"/></a></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"background:white;background-color:white;margin:0px auto;border-radius:30px;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:white;background-color:white;width:100%;border-radius:30px;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div class=\"mj-column-px-600 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:600px;\"><a data-index=\"2\" href=\"https://gtinsi.de/691753713e2df\" target=\"_blank\"><img alt=\"Offrez un colis de No\u00ebl pour un a\u00een\u00e9 isol\u00e9 et illuminez son r\u00e9veillon ! J'offre un colis\" height=\"auto\" src=\"img_1.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"600\"/></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"left\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Arial;font-size:18px;line-height:24px;text-align:left;color:#393939;\">Ch\u00e8re Madame, Cher Monsieur,<br/><br/>Aujourd\u2019hui en France, <b>plus de 2 millions de personnes \u00e2g\u00e9es sont isol\u00e9es au quotidien</b>, pire encore, 750 000 ne voient jamais personne*.<br/><br/>Comme tout au long de l\u2019ann\u00e9e, les b\u00e9n\u00e9voles des Petits Fr\u00e8res des Pauvres s\u2019engagent partout en France pour faire oublier la solitude \u00e0 nos a\u00een\u00e9s.</div></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div class=\"hidden-m\">\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div class=\"mj-column-px-600 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:550px;\"><img alt=\"Et si vous les aidiez, \u00e0 l\u2019occasion de cette fin d\u2019ann\u00e9e ? Vous pouvez par exemple faire un don pour financer les colis gourmands que nos b\u00e9n\u00e9voles iront offrir aux a\u00een\u00e9s isol\u00e9s qui ne peuvent plus se d\u00e9placer.\" height=\"auto\" src=\"img_2.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"550\"/></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n</div>\n<div class=\"hidden-d\">\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;padding-bottom:0px;text-align:center;\">\n<div class=\"mj-column-px-400 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:350px;\"><img alt=\"Et si vous les aidiez, \u00e0 l\u2019occasion de cette fin d\u2019ann\u00e9e ? Vous pouvez par exemple faire un don pour financer les colis gourmands que nos b\u00e9n\u00e9voles iront offrir aux a\u00een\u00e9s isol\u00e9s qui ne peuvent plus se d\u00e9placer.\" height=\"auto\" src=\"img_3.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"350\"/></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n</div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"left\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Arial;font-size:18px;line-height:24px;text-align:left;color:#393939;\">Tous les ans pour No\u00ebl, nos \u00e9quipes pr\u00e9parent de belles compositions : entr\u00e9e, plat, dessert, petite douceur, boisson, cadeau\u2026 de quoi illuminer le r\u00e9veillon d\u2019une personne \u00e2g\u00e9e qui est seule\u00a0!</div></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div class=\"mj-column-px-239 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:239px;\"><a data-index=\"3\" href=\"https://gtinsi.de/691753713e2df\" target=\"_blank\"><img alt=\"J'offre un colis\" height=\"auto\" src=\"img_4.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"239\"/></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"left\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Arial;font-size:18px;line-height:24px;text-align:left;color:#393939;\">Votre g\u00e9n\u00e9rosit\u00e9 transformera la solitude d\u2019un a\u00een\u00e9 isol\u00e9 en un moment de joie r\u00e9confortant qui donne du baume au c\u0153ur\u00a0!</div></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div class=\"mj-column-px-226 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:top;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:226px;\"><a data-index=\"4\" href=\"https://gtinsi.de/691753713e2df\" target=\"_blank\"><img alt=\"Je fais un don\" height=\"auto\" src=\"img_5.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"226\"/></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"left\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Arial;font-size:18px;font-weight:bold;line-height:24px;text-align:left;color:#393939;\">En cette p\u00e9riode de f\u00eates, je vous remercie d\u2019unir vos forces aux n\u00f4tres pour faire entrer de la douceur et de la joie au domicile d\u2019une ou de plusieurs personnes \u00e2g\u00e9es\u00a0!</div></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:left;\">\n<div class=\"mj-column-per-15 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:middle;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:middle;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody></tbody></table></td></tr></tbody></table></div>\n<div class=\"mj-column-per-30 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:middle;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:middle;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\"><tbody><tr><td style=\"width:180px;\"><img alt=\"\" height=\"auto\" src=\"img_6.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;\" width=\"180\"/></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>\n<div class=\"mj-column-per-50 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:middle;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td style=\"vertical-align:middle;padding:0px;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\"><tbody><tr><td align=\"left\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Arial;font-size:16px;line-height:20px;text-align:left;color:#571936;\">\n<b>Anne G\u00e9neau</b><br/>Pr\u00e9sidente<br/>Petits Fr\u00e8res des Pauvres</div></td></tr></tbody></table></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"margin:0px auto;max-width:600px;\"><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\"><tbody><tr><td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;\">\n<div class=\"mj-column-per-100 mj-outlook-group-fix\" style=\"font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"vertical-align:top;\" width=\"100%\"><tbody><tr><td align=\"right\" style=\"font-size:0px;padding:10px 25px;word-break:break-word;\"><div style=\"font-family:Helvetica;font-size:12px;line-height:14px;text-align:right;color:#ffffff;\"><i>*\u00c9tude CSA Research/Petits Fr\u00e8res des Pauvres, 2025</i></div></td></tr></tbody></table></div>\n</td></tr></tbody></table></div>\n<div style=\"height:60px;line-height:60px;\">\u200a</div>\n</div>\n<img alt=\"\" height=\"1\" src=\"\" style=\"display:none !important;\" width=\"1\"/>\n</body></html>\n";
        const frame = document.getElementById('emailFrame');
        let linksHighlighted = false;
        let overlayElements = [];
        let lastHighlightedIdx = null;
        let spotlightTimeout = null;

        function init() {
            const doc = frame.contentDocument;
            doc.open();
            doc.write(content);
            doc.close();

            const style = doc.createElement('style');
            style.innerHTML = `
                :root {
                    --spotlight-dim: rgba(0, 0, 0, 0.6);
                    --spotlight-glow: #50FA7B;
                }
                [data-theme="dark"] {
                    /* In Dark Mode (Inverted), we want the dimming to be light so it inverts to dark */
                    --spotlight-dim: rgba(255, 255, 255, 0.7);
                    /* And we use the complement of green so it inverts back to green */
                    --spotlight-glow: #AF0584; 
                }
                body { margin: 0; font-family: sans-serif; background: #fff; position: relative; }
                .link-outline { 
                    outline: 2px solid #8BE9FD !important; /* Cyan */
                    outline-offset: 1px !important;
                    transition: outline 0.2s ease;
                }
                .link-highlight-pulse {
                    animation: link-pulse 2s infinite;
                }
                @keyframes link-pulse {
                    0% { outline-color: #8BE9FD; outline-width: 2px; }
                    50% { outline-color: #BD93F9; outline-width: 4px; outline-offset: 3px; }
                    100% { outline-color: #8BE9FD; outline-width: 2px; }
                }
                .link-flash-spotlight {
                    position: relative !important;
                    z-index: 2147483647 !important;
                    outline: 8px solid var(--spotlight-glow) !important;
                    outline-offset: 4px !important;
                    box-shadow: 0 0 0 10000px var(--spotlight-dim), 0 0 40px var(--spotlight-glow) !important;
                    background-color: rgba(255, 255, 255, 1) !important;
                    color: #282a36 !important;
                }
            `;
            doc.head.appendChild(style);

            const theme = localStorage.getItem('theme') || 'light';
            if (theme === 'dark') applyTheme('dark');
        }

        function setMode(mode) {
            const frameEl = document.getElementById('deviceFrame');
            const iframeEl = document.getElementById('emailFrame');

            document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
            const btn = document.querySelector(`.device-btn[onclick*="${mode}"]`);
            if (btn) btn.classList.add('active');

            // Remove/add scrollbar class
            if (mode === 'mobile') {
                frameEl.style.maxWidth = '375px';
                iframeEl.classList.add('no-scrollbar');
            } else if (mode === 'tablet') {
                frameEl.style.maxWidth = '600px';
                iframeEl.classList.add('no-scrollbar');
            } else {
                frameEl.style.maxWidth = '800px';
                iframeEl.classList.remove('no-scrollbar');
            }

            // Update overlays if visible
            if (linksHighlighted) {
                setTimeout(updateOverlays, 150);
            }
        }

        function highlightLink(idx) {
            const doc = frame.contentDocument;
            const link = doc.querySelector(`[data-index="${idx}"]`);
            if (link) {
                // Toggle Logic: If clicking the same link again, remove highlight
                if (lastHighlightedIdx === idx) {
                    doc.querySelectorAll('.link-flash-spotlight').forEach(el => el.classList.remove('link-flash-spotlight'));
                    if (!linksHighlighted) {
                        link.classList.remove('link-outline');
                    }
                    lastHighlightedIdx = null;
                    if (spotlightTimeout) clearTimeout(spotlightTimeout);
                    return;
                }

                lastHighlightedIdx = idx;

                // Ensure it's scrolled into view
                link.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Remove existing flash/spotlight from others
                doc.querySelectorAll('.link-flash-spotlight').forEach(el => el.classList.remove('link-flash-spotlight'));

                // Add spotlight class (this dims the rest of the iframe via large box-shadow)
                link.classList.add('link-flash-spotlight');

                // If Show Links is off, temporarily show this one's overlay/outline
                const wasHighlighted = linksHighlighted;
                if (!wasHighlighted) {
                    link.classList.add('link-outline');
                }

                if (spotlightTimeout) clearTimeout(spotlightTimeout);
                spotlightTimeout = setTimeout(() => {
                    link.classList.remove('link-flash-spotlight');
                    if (!wasHighlighted) {
                        link.classList.remove('link-outline');
                    }
                    if (lastHighlightedIdx === idx) lastHighlightedIdx = null;
                }, 4000); // 4 seconds spotlight
            }
        }

        function toggleHighlightLinks() {
            linksHighlighted = !linksHighlighted;
            const btn = document.getElementById('highlightBtnText');
            btn.textContent = linksHighlighted ? 'Hide Links' : 'Show Links';

            if (linksHighlighted) {
                createOverlays();
            } else {
                removeOverlays();
            }
        }

        function createOverlays() {
            removeOverlays();
            const doc = frame.contentDocument;
            const links = doc.querySelectorAll('[data-index]');
            const container = document.getElementById('linkOverlays');
            const frameRect = frame.getBoundingClientRect();

            links.forEach(link => {
                const idx = link.getAttribute('data-index');
                let rect = link.getBoundingClientRect();

                // Advanced Dimension Check: If element is "empty" or "inline-collapsed", check children or use parent
                if (rect.width <= 2 || rect.height <= 2) {
                    const children = link.querySelectorAll('img, table, div, span, p');
                    let found = false;
                    for (let child of children) {
                        const childRect = child.getBoundingClientRect();
                        if (childRect.width > 2 && childRect.height > 2) {
                            rect = childRect;
                            found = true;
                            break;
                        }
                    }
                    // If still no size, it might be a text-only link that is display: inline
                    // Try to get a range client rect if possible
                    if (!found) {
                        try {
                            const range = doc.createRange();
                            range.selectNodeContents(link);
                            const rangeRect = range.getBoundingClientRect();
                            if (rangeRect.width > 0) {
                                rect = rangeRect;
                            }
                        } catch (e) {
                            console.warn("Could not calculate range rect for link", idx);
                        }
                    }
                }

                // Final safety skip
                if (rect.width === 0 || rect.height === 0) return;

                // Clipping Logic: Only show badge if link is at least partially visible in iframe viewport
                // rect is relative to iframe viewport
                const iframeHeight = frame.clientHeight;
                const iframeWidth = frame.clientWidth;

                // If the link is fully out of view, skip it
                if (rect.bottom < 0 || rect.top > iframeHeight || rect.right < 0 || rect.left > iframeWidth) {
                    return;
                }

                // Create overlay badge
                const badge = document.createElement('div');
                badge.className = 'link-overlay-badge';
                badge.textContent = idx;

                // Position badge: top-right calculation relative to main window
                let badgeX, badgeY;
                if (rect.width < 15) {
                    badgeX = frameRect.left + rect.left + (rect.width / 2) - 10;
                    badgeY = frameRect.top + rect.top - 20;
                } else {
                    badgeX = frameRect.left + rect.left + rect.width - 6;
                    badgeY = frameRect.top + rect.top - 12;
                }

                // Ensure the badge itself is clipped by the frame boundaries
                // (e.g. don't let it overlap the header if the link is at the very top edge)
                if (badgeY < frameRect.top) {
                    // If the link is partially visible at top but badge would be outside,
                    // we can either hide it or stick it to the edge. Let's hide for clean look.
                    return;
                }
                if (badgeY > frameRect.bottom - 20) {
                    return;
                }

                badge.style.cssText = `
                    position: fixed;
                    left: ${badgeX}px;
                    top: ${badgeY}px;
                    background: #BD93F9; /* Purple for badges */
                    color: #fff;
                    font-size: 11px;
                    font-weight: 800;
                    padding: 0px 6px;
                    min-width: 20px;
                    height: 20px;
                    line-height: 20px;
                    border-radius: 10px;
                    font-family: 'Inter', sans-serif;
                    z-index: 1000;
                    box-shadow: 0 3px 6px rgba(0,0,0,0.5), 0 0 0 2px rgba(255,255,255,0.8);
                    text-align: center;
                    border: none;
                    pointer-events: none;
                    opacity: 1;
                    transition: transform 0.2s ease;
                `;
                container.appendChild(badge);
                overlayElements.push(badge);

                // Add highlight to link in iframe
                link.classList.add('link-outline');
                link.classList.add('link-highlight-pulse');
            });
        }

        function removeOverlays() {
            const container = document.getElementById('linkOverlays');
            container.innerHTML = '';
            overlayElements = [];

            // Remove outlines from iframe links
            const doc = frame.contentDocument;
            if (doc) {
                const links = doc.querySelectorAll('[data-index]');
                links.forEach(link => {
                    link.classList.remove('link-outline');
                    link.classList.remove('link-highlight-pulse');
                    link.classList.remove('link-flash-spotlight');
                });
            }
        }

        function updateOverlays() {
            if (linksHighlighted) {
                createOverlays();
            }
        }

        // Update overlays logic
        frame.addEventListener('load', () => {
            frame.contentWindow.addEventListener('scroll', () => {
                if (linksHighlighted) updateOverlays();
            });
            frame.contentWindow.addEventListener('resize', () => {
                if (linksHighlighted) updateOverlays();
            });
        });

        function openHtmlModal() {
            const modal = document.getElementById('htmlModal');
            const codeEl = document.getElementById('htmlSourceCode');
            codeEl.textContent = content;
            modal.classList.add('active');
        }

        function closeHtmlModal() {
            document.getElementById('htmlModal').classList.remove('active');
        }

        function copyAllHtml() {
            navigator.clipboard.writeText(content).then(() => {
                const btn = event.target;
                const original = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = original, 1500);
            });
        }

        function copyLink(btn, url) {
            navigator.clipboard.writeText(url).then(() => {
                const originalHtml = btn.innerHTML;
                // Temporarily show checkmark
                btn.innerHTML = '<span style="color: var(--accent-green); font-weight: bold;">âœ“</span>';
                btn.classList.add('copy-success');

                setTimeout(() => {
                    btn.innerHTML = originalHtml;
                    btn.classList.remove('copy-success');
                }, 1500);
            });
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('htmlModal');
                if (modal.classList.contains('active')) closeHtmlModal();
            }
            if (e.key === '1') setMode('mobile');
            if (e.key === '2') setMode('tablet');
            if (e.key === '3') setMode('desktop');
            if (e.key === 't' || e.key === 'T') toggleTheme();
            if (e.key === 'h' || e.key === 'H') toggleHighlightLinks();
            if (e.key === 'v' || e.key === 'V') openHtmlModal();

            // Scroll iframe with arrows
            if (e.key === 'ArrowDown') frame.contentWindow.scrollBy(0, 150);
            if (e.key === 'ArrowUp') frame.contentWindow.scrollBy(0, -150);
        });

        init();
    </script>
</body>

</html>